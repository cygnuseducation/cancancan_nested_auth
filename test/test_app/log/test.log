  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-06-30 17:49:57.776661"], ["updated_at", "2023-06-30 17:49:57.776661"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ?[0m  [["user_id", 1], ["id", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18287)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 4098)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-06-30 21:01:15.864394"], ["updated_at", "2023-06-30 21:01:15.864394"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "brands";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "parts";
DELETE FROM "users";
DELETE FROM "vehicles";
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-06-30 21:02:13.595361"], ["updated_at", "2023-06-30 21:02:13.595361"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "brands";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "parts";
DELETE FROM "users";
DELETE FROM "vehicles";
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 13:36:07.579006"], ["updated_at", "2023-08-29 13:36:07.579006"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ?[0m  [["user_id", 1], ["id", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18287)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 4099)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 14:06:35.892865"], ["updated_at", "2023-08-29 14:06:35.892865"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:25:10.123867"], ["updated_at", "2023-08-29 18:25:10.123867"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.1ms | Allocations: 9058)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.1ms | Allocations: 3261)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:25:46.059244"], ["updated_at", "2023-08-29 18:25:46.059244"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.1ms | Allocations: 10068)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 4186)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:27:10.796848"], ["updated_at", "2023-08-29 18:27:10.796848"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 5448)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:28:35.226694"], ["updated_at", "2023-08-29 18:28:35.226694"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms | Allocations: 6251)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:29:21.194721"], ["updated_at", "2023-08-29 18:29:21.194721"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 4930)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:29:38.345039"], ["updated_at", "2023-08-29 18:29:38.345039"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 7093)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:30:20.767012"], ["updated_at", "2023-08-29 18:30:20.767012"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 6834)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:30:54.494442"], ["updated_at", "2023-08-29 18:30:54.494442"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 6555)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:31:00.147909"], ["updated_at", "2023-08-29 18:31:00.147909"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.1ms | Allocations: 17268)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 4830)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:31:32.713684"], ["updated_at", "2023-08-29 18:31:32.713684"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 16003)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 4829)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:32:25.429437"], ["updated_at", "2023-08-29 18:32:25.429437"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.2ms | Allocations: 15669)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 4829)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:32:43.542672"], ["updated_at", "2023-08-29 18:32:43.542672"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18210)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 4427)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:35:06.355009"], ["updated_at", "2023-08-29 18:35:06.355009"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 18218)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:53:31.106647"], ["updated_at", "2023-08-29 18:53:31.106647"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 19320)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:53:53.106018"], ["updated_at", "2023-08-29 18:53:53.106018"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 19317)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 4401)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:56:18.373200"], ["updated_at", "2023-08-29 18:56:18.373200"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 19317)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.1ms | Allocations: 11498)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 4402)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:59:06.312847"], ["updated_at", "2023-08-29 18:59:06.312847"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms | Allocations: 15358)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 18:59:57.908073"], ["updated_at", "2023-08-29 18:59:57.908073"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 15365)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms | Allocations: 8521)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:12:08.637176"], ["updated_at", "2023-08-29 19:12:08.637176"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 8875)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:12:35.792768"], ["updated_at", "2023-08-29 19:12:35.792768"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 8875)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:13:49.262676"], ["updated_at", "2023-08-29 19:13:49.262676"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 14708)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms | Allocations: 7881)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:23:36.108615"], ["updated_at", "2023-08-29 19:23:36.108615"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18614)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 11090)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 8715)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 3920)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:23:56.543641"], ["updated_at", "2023-08-29 19:23:56.543641"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms | Allocations: 14689)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 9093)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:31:02.714825"], ["updated_at", "2023-08-29 19:31:02.714825"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 14729)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 9132)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:32:22.929903"], ["updated_at", "2023-08-29 19:32:22.929903"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 14752)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 9152)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:35:05.963699"], ["updated_at", "2023-08-29 19:35:05.963699"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.1ms | Allocations: 14237)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:36:14.418556"], ["updated_at", "2023-08-29 19:36:14.418556"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 14762)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 9164)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:38:29.297087"], ["updated_at", "2023-08-29 19:38:29.297087"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 14762)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 9162)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:42:12.866164"], ["updated_at", "2023-08-29 19:42:12.866164"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 14795)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 9195)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:42:45.001946"], ["updated_at", "2023-08-29 19:42:45.001946"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 13415)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:43:00.579588"], ["updated_at", "2023-08-29 19:43:00.579588"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 13420)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:43:45.351232"], ["updated_at", "2023-08-29 19:43:45.351232"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 13414)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:43:59.685427"], ["updated_at", "2023-08-29 19:43:59.685427"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 13414)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:44:13.392550"], ["updated_at", "2023-08-29 19:44:13.392550"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 13414)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:44:26.926525"], ["updated_at", "2023-08-29 19:44:26.926525"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms | Allocations: 14260)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:45:34.042341"], ["updated_at", "2023-08-29 19:45:34.042341"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms | Allocations: 14260)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:47:04.685350"], ["updated_at", "2023-08-29 19:47:04.685350"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.4ms | Allocations: 14260)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:47:10.846479"], ["updated_at", "2023-08-29 19:47:10.846479"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms | Allocations: 14260)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:47:39.812839"], ["updated_at", "2023-08-29 19:47:39.812839"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms | Allocations: 14260)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:47:54.551037"], ["updated_at", "2023-08-29 19:47:54.551037"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 14483)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:48:10.291828"], ["updated_at", "2023-08-29 19:48:10.291828"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 13510)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:51:07.726368"], ["updated_at", "2023-08-29 19:51:07.726368"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms | Allocations: 14033)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:51:30.527182"], ["updated_at", "2023-08-29 19:51:30.527182"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms | Allocations: 14033)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:51:52.998608"], ["updated_at", "2023-08-29 19:51:52.998608"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.3ms | Allocations: 14037)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:53:24.634292"], ["updated_at", "2023-08-29 19:53:24.634292"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.2ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.4ms | Allocations: 14080)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:54:23.585775"], ["updated_at", "2023-08-29 19:54:23.585775"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 13514)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:54:27.985751"], ["updated_at", "2023-08-29 19:54:27.985751"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.4ms | Allocations: 14080)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:55:01.391250"], ["updated_at", "2023-08-29 19:55:01.391250"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.3ms | Allocations: 13973)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:58:38.767928"], ["updated_at", "2023-08-29 19:58:38.767928"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 13834)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 19:58:51.427999"], ["updated_at", "2023-08-29 19:58:51.427999"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 14059)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:00:57.724992"], ["updated_at", "2023-08-29 20:00:57.724992"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 13795)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:03:36.424165"], ["updated_at", "2023-08-29 20:03:36.424165"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 14500)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 8930)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:03:53.570946"], ["updated_at", "2023-08-29 20:03:53.570946"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 13760)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:03:57.771855"], ["updated_at", "2023-08-29 20:03:57.771855"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 14498)
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 8931)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:05:43.755846"], ["updated_at", "2023-08-29 20:05:43.755846"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18814)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10901)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9456)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3953)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:06:08.462321"], ["updated_at", "2023-08-29 20:06:08.462321"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18807)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms | Allocations: 10901)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9456)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 3953)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:06:40.169214"], ["updated_at", "2023-08-29 20:06:40.169214"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18807)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10901)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 9408)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:07:33.574489"], ["updated_at", "2023-08-29 20:07:33.574489"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18807)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10901)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9408)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:07:45.087542"], ["updated_at", "2023-08-29 20:07:45.087542"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18808)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10901)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9408)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3953)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:07:50.594583"], ["updated_at", "2023-08-29 20:07:50.594583"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18807)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10901)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9408)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:08:05.972370"], ["updated_at", "2023-08-29 20:08:05.972370"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18807)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10901)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9408)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:24:59.531114"], ["updated_at", "2023-08-29 20:24:59.531114"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.2ms | Allocations: 14637)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10776)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10557)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 4379)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:25:06.503562"], ["updated_at", "2023-08-29 20:25:06.503562"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.2ms | Allocations: 14636)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10776)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10557)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 4379)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:25:20.603567"], ["updated_at", "2023-08-29 20:25:20.603567"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 18814)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.1ms | Allocations: 10897)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 9411)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"3"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "3"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3956)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:26:01.165932"], ["updated_at", "2023-08-29 20:26:01.165932"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"3"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "3"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 6079)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:26:29.590241"], ["updated_at", "2023-08-29 20:26:29.590241"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"3"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "3"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 6079)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:26:48.333609"], ["updated_at", "2023-08-29 20:26:48.333609"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 3]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"3"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "3"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["id", 3]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 6079)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:28:27.530123"], ["updated_at", "2023-08-29 20:28:27.530123"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:28:59.090087"], ["updated_at", "2023-08-29 20:28:59.090087"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:29:08.988238"], ["updated_at", "2023-08-29 20:29:08.988238"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 6563)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:29:47.737607"], ["updated_at", "2023-08-29 20:29:47.737607"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 6570)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:29:58.075248"], ["updated_at", "2023-08-29 20:29:58.075248"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 6570)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:30:02.432071"], ["updated_at", "2023-08-29 20:30:02.432071"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18814)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10897)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9409)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Failed object validations: could not update User, id: 2: []
Completed 422 Unprocessable Entity in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms | Allocations: 3371)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:30:31.674953"], ["updated_at", "2023-08-29 20:30:31.674953"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 6570)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:31:30.758648"], ["updated_at", "2023-08-29 20:31:30.758648"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 6570)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:31:34.270015"], ["updated_at", "2023-08-29 20:31:34.270015"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 18810)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10897)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9409)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3314)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:32:47.652774"], ["updated_at", "2023-08-29 20:32:47.652774"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 6574)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:32:51.183684"], ["updated_at", "2023-08-29 20:32:51.183684"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18810)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms | Allocations: 10897)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 9408)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3314)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3302)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:34:18.166090"], ["updated_at", "2023-08-29 20:34:18.166090"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:35:31.324985"], ["updated_at", "2023-08-29 20:35:31.324985"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:36:52.409788"], ["updated_at", "2023-08-29 20:36:52.409788"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? /* loading for inspect */ LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 11]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? /* loading for inspect */ LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 11]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? /* loading for inspect */ LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 11]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:37:06.190253"], ["updated_at", "2023-08-29 20:37:06.190253"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:37:20.430921"], ["updated_at", "2023-08-29 20:37:20.430921"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.1ms | Allocations: 15155)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:38:14.230794"], ["updated_at", "2023-08-29 20:38:14.230794"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.1ms | Allocations: 15205)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:38:38.033884"], ["updated_at", "2023-08-29 20:38:38.033884"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.1ms | Allocations: 15225)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:39:46.251791"], ["updated_at", "2023-08-29 20:39:46.251791"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.1ms | Allocations: 16034)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:39:52.782047"], ["updated_at", "2023-08-29 20:39:52.782047"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18746)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms | Allocations: 11149)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 9615)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.1ms | Allocations: 3314)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3302)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 9740)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:40:36.106721"], ["updated_at", "2023-08-29 20:40:36.106721"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.1ms | Allocations: 16034)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:41:13.430047"], ["updated_at", "2023-08-29 20:41:13.430047"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.1ms | Allocations: 16027)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:43:21.256300"], ["updated_at", "2023-08-29 20:43:21.256300"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" = ? LIMIT ?[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 18744)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.1ms | Allocations: 11149)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "1"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 9615)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3314)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", "2"], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3302)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 9740)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mPart Update All (0.0ms)[0m  [1m[33mUPDATE "parts" SET "partable_id" = ?, "partable_type" = ? WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ?[0m  [["partable_id", nil], ["partable_type", nil], ["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name") VALUES (?, ?)[0m  [["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 10173)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" DEFAULT VALUES[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" DEFAULT VALUES[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:50:36.928658"], ["updated_at", "2023-08-29 20:50:36.928658"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mPart Update All (0.0ms)[0m  [1m[33mUPDATE "parts" SET "partable_id" = ?, "partable_type" = ? WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ?[0m  [["partable_id", nil], ["partable_type", nil], ["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name") VALUES (?, ?)[0m  [["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("id", "make", "model", "user_id") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["make", "makey"], ["model", "modely"], ["user_id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.3ms | Allocations: 15968)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:50:41.061947"], ["updated_at", "2023-08-29 20:50:41.061947"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mPart Update All (0.0ms)[0m  [1m[33mUPDATE "parts" SET "partable_id" = ?, "partable_type" = ? WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ?[0m  [["partable_id", nil], ["partable_type", nil], ["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name") VALUES (?, ?)[0m  [["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("id", "make", "model", "user_id") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["make", "makey"], ["model", "modely"], ["user_id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.3ms | Allocations: 15968)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" serial NOT NULL PRIMARY KEY, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:51:14.953744"], ["updated_at", "2023-08-29 20:51:14.953744"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mPart Update All (0.0ms)[0m  [1m[33mUPDATE "parts" SET "partable_id" = ?, "partable_type" = ? WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ?[0m  [["partable_id", nil], ["partable_type", nil], ["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name") VALUES (?, ?)[0m  [["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.2ms | Allocations: 15623)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" serial NOT NULL PRIMARY KEY, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" serial NOT NULL PRIMARY KEY, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" serial NOT NULL PRIMARY KEY, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:51:24.032418"], ["updated_at", "2023-08-29 20:51:24.032418"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mPart Update All (0.0ms)[0m  [1m[33mUPDATE "parts" SET "partable_id" = ?, "partable_type" = ? WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ?[0m  [["partable_id", nil], ["partable_type", nil], ["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name") VALUES (?, ?)[0m  [["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("id", "make", "model", "user_id") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["make", "makey"], ["model", "modely"], ["user_id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.3ms | Allocations: 15968)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:51:35.944631"], ["updated_at", "2023-08-29 20:51:35.944631"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5], ["LIMIT", 1]]
  [1m[36mPart Update All (0.0ms)[0m  [1m[33mUPDATE "parts" SET "partable_id" = ?, "partable_type" = ? WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."id" = ?[0m  [["partable_id", nil], ["partable_type", nil], ["partable_id", 1], ["partable_type", "Vehicle"], ["id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name") VALUES (?, ?)[0m  [["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.1ms)[0m  [1m[32mINSERT INTO "vehicles" ("id", "make", "model", "user_id") VALUES (?, ?, ?, ?)[0m  [["id", 1], ["make", "makey"], ["model", "modely"], ["user_id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.3ms | Allocations: 15964)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:55:47.728910"], ["updated_at", "2023-08-29 20:55:47.728910"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name") VALUES (?, ?)[0m  [["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 15062)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:56:40.649950"], ["updated_at", "2023-08-29 20:56:40.649950"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameters: :email, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name") VALUES (?, ?)[0m  [["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 15062)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "users"."email" FROM "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:57:06.358884"], ["updated_at", "2023-08-29 20:57:06.358884"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:57:15.612734"], ["updated_at", "2023-08-29 20:57:15.612734"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 15096)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "users"."email" FROM "users"[0m
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:57:37.652580"], ["updated_at", "2023-08-29 20:57:37.652580"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 15096)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "users"."email" FROM "users"[0m
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:58:54.272646"], ["updated_at", "2023-08-29 20:58:54.272646"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 18860)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 11364)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 9799)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3314)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3302)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 10174)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:59:03.155083"], ["updated_at", "2023-08-29 20:59:03.155083"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 20:59:17.587280"], ["updated_at", "2023-08-29 20:59:17.587280"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.1ms | Allocations: 15164)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:03:31.490892"], ["updated_at", "2023-08-29 21:03:31.490892"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 18859)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 11364)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.0ms | ActiveRecord: 0.2ms | Allocations: 9799)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3314)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3302)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 9035)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9668)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 11179)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:04:16.701097"], ["updated_at", "2023-08-29 21:04:16.701097"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 18859)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 11364)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 9799)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3314)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3302)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 9035)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9668)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 11179)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:04:49.243476"], ["updated_at", "2023-08-29 21:04:49.243476"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 18860)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 11364)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 9799)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms | Allocations: 3931)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3314)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3302)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 9035)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 9668)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 11179)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? /* loading for inspect */ LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 11]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:04:59.367968"], ["updated_at", "2023-08-29 21:04:59.367968"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 24406)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:05:19.522249"], ["updated_at", "2023-08-29 21:05:19.522249"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 24405)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:05:29.643610"], ["updated_at", "2023-08-29 21:05:29.643610"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 24405)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:06:25.956426"], ["updated_at", "2023-08-29 21:06:25.956426"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 24978)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:06:34.349877"], ["updated_at", "2023-08-29 21:06:34.349877"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :brand_ids[0m
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 24978)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:06:52.094029"], ["updated_at", "2023-08-29 21:06:52.094029"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 6]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 29094)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:08:20.075627"], ["updated_at", "2023-08-29 21:08:20.075627"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 19436)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 11902)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 10353)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 4481)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3850)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3835)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 9639)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 10305)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" IS NULL ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" IS NULL ORDER BY "parts"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 6]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.0ms | ActiveRecord: 0.2ms | Allocations: 12785)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:09:30.211283"], ["updated_at", "2023-08-29 21:09:30.211283"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 19362)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 11664)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.0ms | ActiveRecord: 0.2ms | Allocations: 10151)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.1ms | Allocations: 4481)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3850)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3835)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 9609)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 10277)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 6]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.0ms | ActiveRecord: 0.2ms | Allocations: 12383)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-29 21:19:48.901537"], ["updated_at", "2023-08-29 21:19:48.901537"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.1ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 19361)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.2ms | Allocations: 11664)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Benjamin", "last_name"=>"Denar", "email"=>"dontupdate@here.there", "group_ids"=>[1, 2], "vehicles_attributes"=>[{"make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 10151)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tom", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :email, :group_ids, :vehicles_attributes, :id, :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 4481)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3850)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.1ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#update as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"dontupdate@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}], "id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[31mUnpermitted parameters: :first_name, :last_name, :email, :group_ids, :vehicles_attributes, :id, :format[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 3835)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms | Allocations: 9609)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"id"=>1, "make"=>"makey", "model"=>"modely", "parts_attributes"=>[{"id"=>5, "name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 10277)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
Processing by UsersController#create as JSON
  Parameters: {"first_name"=>"Alen", "last_name"=>"Tommy", "email"=>"aaga@here.there", "group_ids"=>[2], "vehicles_attributes"=>[{"make"=>"Dodgy", "model"=>"Fun", "parts_attributes"=>[{"name"=>"Frame (warped)", "brand_ids"=>[1]}]}]}
[31mUnpermitted parameter: :format[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 6]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 12383)
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 04:50:06.695272"], ["updated_at", "2023-08-30 04:50:06.695272"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 04:50:27.814579"], ["updated_at", "2023-08-30 04:50:27.814579"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 04:52:38.679519"], ["updated_at", "2023-08-30 04:52:38.679519"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 04:52:57.150137"], ["updated_at", "2023-08-30 04:52:57.150137"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 04:56:36.613513"], ["updated_at", "2023-08-30 04:56:36.613513"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 04:56:58.838841"], ["updated_at", "2023-08-30 04:56:58.838841"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 04:57:15.018328"], ["updated_at", "2023-08-30 04:57:15.018328"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 04:58:33.800552"], ["updated_at", "2023-08-30 04:58:33.800552"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["email", "dontupdate@here.there"], ["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 04:58:55.984638"], ["updated_at", "2023-08-30 04:58:55.984638"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["email", "dontupdate@here.there"], ["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 05:00:11.560021"], ["updated_at", "2023-08-30 05:00:11.560021"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["email", "dontupdate@here.there"], ["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 05:01:07.427486"], ["updated_at", "2023-08-30 05:01:07.427486"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 05:01:40.627392"], ["updated_at", "2023-08-30 05:01:40.627392"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["email", "dontupdate@here.there"], ["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 05:02:06.242840"], ["updated_at", "2023-08-30 05:02:06.242840"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["email", "dontupdate@here.there"], ["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 05:02:35.343988"], ["updated_at", "2023-08-30 05:02:35.343988"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["email", "dontupdate@here.there"], ["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 05:03:06.139958"], ["updated_at", "2023-08-30 05:03:06.139958"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["email", "dontupdate@here.there"], ["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 05:03:48.378960"], ["updated_at", "2023-08-30 05:03:48.378960"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "email" = ?, "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["email", "dontupdate@here.there"], ["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:13:53.841083"], ["updated_at", "2023-08-30 23:13:53.841083"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:14:49.537786"], ["updated_at", "2023-08-30 23:14:49.537786"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:15:15.551489"], ["updated_at", "2023-08-30 23:15:15.551489"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:18:40.112897"], ["updated_at", "2023-08-30 23:18:40.112897"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:20:20.189201"], ["updated_at", "2023-08-30 23:20:20.189201"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:20:54.663197"], ["updated_at", "2023-08-30 23:20:54.663197"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:21:17.006861"], ["updated_at", "2023-08-30 23:21:17.006861"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:21:33.796875"], ["updated_at", "2023-08-30 23:21:33.796875"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:22:47.203255"], ["updated_at", "2023-08-30 23:22:47.203255"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:23:26.007049"], ["updated_at", "2023-08-30 23:23:26.007049"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:24:05.582111"], ["updated_at", "2023-08-30 23:24:05.582111"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:24:34.712660"], ["updated_at", "2023-08-30 23:24:34.712660"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:25:07.911224"], ["updated_at", "2023-08-30 23:25:07.911224"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:36:14.701360"], ["updated_at", "2023-08-30 23:36:14.701360"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:36:40.574326"], ["updated_at", "2023-08-30 23:36:40.574326"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:37:49.081668"], ["updated_at", "2023-08-30 23:37:49.081668"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mVehicle Load (0.2ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" ORDER BY "vehicles"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:39:26.523711"], ["updated_at", "2023-08-30 23:39:26.523711"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:40:06.738190"], ["updated_at", "2023-08-30 23:40:06.738190"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:40:42.326443"], ["updated_at", "2023-08-30 23:40:42.326443"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:43:57.396293"], ["updated_at", "2023-08-30 23:43:57.396293"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:44:11.528209"], ["updated_at", "2023-08-30 23:44:11.528209"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:45:25.322503"], ["updated_at", "2023-08-30 23:45:25.322503"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:46:45.779339"], ["updated_at", "2023-08-30 23:46:45.779339"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:47:02.344121"], ["updated_at", "2023-08-30 23:47:02.344121"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:48:09.962566"], ["updated_at", "2023-08-30 23:48:09.962566"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:48:35.556223"], ["updated_at", "2023-08-30 23:48:35.556223"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:48:51.038489"], ["updated_at", "2023-08-30 23:48:51.038489"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:49:08.984986"], ["updated_at", "2023-08-30 23:49:08.984986"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:49:20.612751"], ["updated_at", "2023-08-30 23:49:20.612751"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[31mUnpermitted parameters: :id, :email, :group_ids, :vehicles_attributes[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:51:39.780072"], ["updated_at", "2023-08-30 23:51:39.780072"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:52:20.477668"], ["updated_at", "2023-08-30 23:52:20.477668"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mPart Load (0.3ms)[0m  [1m[34mSELECT "parts".* FROM "parts" ORDER BY "parts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:53:23.787276"], ["updated_at", "2023-08-30 23:53:23.787276"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "parts"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:54:06.207734"], ["updated_at", "2023-08-30 23:54:06.207734"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "parts"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:55:00.109050"], ["updated_at", "2023-08-30 23:55:00.109050"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "brands";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "parts";
DELETE FROM "users";
DELETE FROM "vehicles";
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:56:38.153556"], ["updated_at", "2023-08-30 23:56:38.153556"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:59:03.934331"], ["updated_at", "2023-08-30 23:59:03.934331"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:59:19.073585"], ["updated_at", "2023-08-30 23:59:19.073585"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-30 23:59:26.539187"], ["updated_at", "2023-08-30 23:59:26.539187"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 00:00:32.802107"], ["updated_at", "2023-08-31 00:00:32.802107"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:09:14.451302"], ["updated_at", "2023-08-31 01:09:14.451302"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:09:28.141701"], ["updated_at", "2023-08-31 01:09:28.141701"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:12:04.318721"], ["updated_at", "2023-08-31 01:12:04.318721"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:12:50.477643"], ["updated_at", "2023-08-31 01:12:50.477643"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:13:35.089453"], ["updated_at", "2023-08-31 01:13:35.089453"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:14:01.354761"], ["updated_at", "2023-08-31 01:14:01.354761"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:15:35.617921"], ["updated_at", "2023-08-31 01:15:35.617921"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:15:47.131652"], ["updated_at", "2023-08-31 01:15:47.131652"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:16:42.869075"], ["updated_at", "2023-08-31 01:16:42.869075"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:17:18.879127"], ["updated_at", "2023-08-31 01:17:18.879127"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:17:25.892785"], ["updated_at", "2023-08-31 01:17:25.892785"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:18:24.151022"], ["updated_at", "2023-08-31 01:18:24.151022"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 4]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:18:57.581868"], ["updated_at", "2023-08-31 01:18:57.581868"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:23:23.870523"], ["updated_at", "2023-08-31 01:23:23.870523"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:24:22.306636"], ["updated_at", "2023-08-31 01:24:22.306636"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:25:26.059245"], ["updated_at", "2023-08-31 01:25:26.059245"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:25:52.145339"], ["updated_at", "2023-08-31 01:25:52.145339"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 4]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 6]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 4], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 4], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 4]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 4], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:32:39.184381"], ["updated_at", "2023-08-31 01:32:39.184381"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:33:22.277352"], ["updated_at", "2023-08-31 01:33:22.277352"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:33:32.101414"], ["updated_at", "2023-08-31 01:33:32.101414"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:33:42.278624"], ["updated_at", "2023-08-31 01:33:42.278624"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:34:20.795791"], ["updated_at", "2023-08-31 01:34:20.795791"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:34:55.835913"], ["updated_at", "2023-08-31 01:34:55.835913"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:35:45.600295"], ["updated_at", "2023-08-31 01:35:45.600295"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:35:57.519375"], ["updated_at", "2023-08-31 01:35:57.519375"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:36:57.568909"], ["updated_at", "2023-08-31 01:36:57.568909"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name") VALUES (?, ?)[0m  [["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "makey"], ["model", "modely"], ["user_id", 5]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:37:51.151373"], ["updated_at", "2023-08-31 01:37:51.151373"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "makey"], ["model", "modely"], ["user_id", 5]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 5], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 5], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:38:02.153203"], ["updated_at", "2023-08-31 01:38:02.153203"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.1ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 5]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 5]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 6]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 5], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 5], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "makey"], ["model", "modely"], ["user_id", 5]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 5], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 5], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:38:44.275568"], ["updated_at", "2023-08-31 01:38:44.275568"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 5]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 5]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 6]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 5], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 5], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "makey"], ["model", "modely"], ["user_id", 5]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 5], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 5], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:39:33.278560"], ["updated_at", "2023-08-31 01:39:33.278560"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 5]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 5]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 6]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 5], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.5ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 5], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "makey"], ["model", "modely"], ["user_id", 5]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 5], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 5], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "first_name" varchar, "last_name" varchar, "role" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "groups"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "groups_users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" bigint, "group_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "vehicles"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "vehicles" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "make" varchar, "model" varchar, "user_id" bigint, "type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "parts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "partable_id" bigint, "partable_type" varchar)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_parts_on_partable_type_and_partable_id" ON "parts" ("partable_type", "partable_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands_parts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "brand_id" bigint, "part_id" bigint)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "brands"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200508150547)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-31 01:42:06.803828"], ["updated_at", "2023-08-31 01:42:06.803828"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 1], ["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."id" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 5]]
  [1m[36mPart Update (0.0ms)[0m  [1m[33mUPDATE "parts" SET "name" = ? WHERE "parts"."id" = ?[0m  [["name", "Frame (warped)"], ["id", 5]]
  [1m[36mCar Update (0.0ms)[0m  [1m[33mUPDATE "vehicles" SET "make" = ?, "model" = ? WHERE "vehicles"."id" = ?[0m  [["make", "makey"], ["model", "modely"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "modely"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."model" = ? LIMIT ?[0m  [["user_id", 1], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "parts"."name" FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 1], ["group_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."id" IS NULL LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Benjamin"], ["last_name", "Denar"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test@test.test"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "vehicles"."make", "vehicles"."model" FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."model" = ? LIMIT ?[0m  [["model", "modely"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? LIMIT ?[0m  [["make", "makey"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List A"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.0ms)[0m  [1m[33mUPDATE "users" SET "first_name" = ?, "last_name" = ? WHERE "users"."id" = ?[0m  [["first_name", "Alen"], ["last_name", "Tom"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test2@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 2]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodge"], ["model", "Caraven"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."partable_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? LIMIT ?[0m  [["partable_id", 1], ["partable_type", "Vehicle"], ["name", "Frame"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."id" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ?[0m  [["user_id", 5]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? LIMIT ?[0m  [["name", "Frame"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 5]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test3@test.test"], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."first_name" = ? AND "users"."last_name" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["first_name", "Alen"], ["last_name", "Tommy"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "Dodgy"], ["model", "Fun"], ["user_id", 5]]
  [1m[36mPart Create (0.0ms)[0m  [1m[32mINSERT INTO "parts" ("name", "partable_id", "partable_type") VALUES (?, ?, ?)[0m  [["name", "Frame (warped)"], ["partable_id", 5], ["partable_type", "Vehicle"]]
  [1m[36mBrandsPart Create (0.0ms)[0m  [1m[32mINSERT INTO "brands_parts" ("brand_id", "part_id") VALUES (?, ?)[0m  [["brand_id", 1], ["part_id", 6]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 5], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.1ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 5], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "brands"."id" FROM "brands" INNER JOIN "brands_parts" ON "brands"."id" = "brands_parts"."brand_id" WHERE "brands_parts"."part_id" = ?[0m  [["part_id", 6]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "vehicles";
DELETE FROM "parts";
DELETE FROM "groups";
DELETE FROM "groups_users";
DELETE FROM "brands";
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (1, 'test@test.test', 'Ben', 'Dana', 'staff');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (2, 'test2@test.test', 'Victor', 'Frankenstein', NULL);
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (3, 'test3@test.test', 'Vic', 'Franky', 'creative');
INSERT INTO "users" ("id", "email", "first_name", "last_name", "role") VALUES (4, 'test4@test.test', 'Vaac', 'Frinkle', 'vehicle-creator;user-creator');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (1, 'Dodge', 'Caraven', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (2, 'Tesla', 'Roadster', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (3, 'Ford', 'Firebird', 1, 'Car');
INSERT INTO "vehicles" ("id", "make", "model", "user_id", "type") VALUES (4, 'Honda', 'Rebel', 1, 'Motorcycle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (1, 'Engine', 1, 'Vehicle');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (2, 'Alternator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (3, 'Radiator', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (4, 'Battery', 1, 'Part');
INSERT INTO "parts" ("id", "name", "partable_id", "partable_type") VALUES (5, 'Frame', 1, 'Vehicle');
INSERT INTO "groups" ("id", "name") VALUES (1, 'Notification List A');
INSERT INTO "groups" ("id", "name") VALUES (2, 'Notification List B');
INSERT INTO "groups" ("id", "name") VALUES (3, 'Notification List C');
INSERT INTO "groups_users" ("id", "user_id", "group_id") VALUES (817774787, 1, 1);
INSERT INTO "brands" ("id", "name") VALUES (1, 'Cromwell');
INSERT INTO "brands" ("id", "name") VALUES (2, 'Lionel');
INSERT INTO "brands" ("id", "name") VALUES (3, 'Pitts')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "test4@test.test"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" WHERE "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."name" = ? LIMIT ?[0m  [["name", "Cromwell"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name") VALUES (?, ?, ?)[0m  [["email", "aaga@here.there"], ["first_name", "Alen"], ["last_name", "Tommy"]]
  [1m[36mVehicle Create (0.0ms)[0m  [1m[32mINSERT INTO "vehicles" ("make", "model", "user_id") VALUES (?, ?, ?)[0m  [["make", "makey"], ["model", "modely"], ["user_id", 5]]
  [1m[36mGroupsUser Create (0.0ms)[0m  [1m[32mINSERT INTO "groups_users" ("user_id", "group_id") VALUES (?, ?)[0m  [["user_id", 5], ["group_id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "aaga@here.there"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."user_id" = ? AND "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["user_id", 5], ["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[36mVehicle Load (0.0ms)[0m  [1m[34mSELECT "vehicles".* FROM "vehicles" WHERE "vehicles"."make" = ? AND "vehicles"."model" = ? ORDER BY "vehicles"."id" ASC LIMIT ?[0m  [["make", "Dodgy"], ["model", "Fun"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "groups"."id" FROM "groups" INNER JOIN "groups_users" ON "groups"."id" = "groups_users"."group_id" WHERE "groups_users"."user_id" = ?[0m  [["user_id", 5]]
  [1m[36mGroup Load (0.0ms)[0m  [1m[34mSELECT "groups".* FROM "groups" WHERE "groups"."name" = ? LIMIT ?[0m  [["name", "Notification List B"], ["LIMIT", 1]]
  [1m[36mPart Load (0.0ms)[0m  [1m[34mSELECT "parts".* FROM "parts" INNER JOIN "vehicles" ON "parts"."partable_id" = "vehicles"."id" WHERE "vehicles"."user_id" = ? AND "parts"."partable_type" = ? AND "parts"."name" = ? ORDER BY "parts"."id" ASC LIMIT ?[0m  [["user_id", 5], ["partable_type", "Vehicle"], ["name", "Frame (warped)"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
